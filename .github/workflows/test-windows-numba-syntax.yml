name: Test Windows NumPy/Numba Syntax

# Manual trigger only
on:
  workflow_dispatch:

jobs:
  test-windows-batch-syntax:
    # Note: windows-2025 may not be available yet, using windows-latest
    # Change to windows-2025 when available
    runs-on: windows-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install numba (includes numpy dependency)
        run: |
          python -m pip install --upgrade pip
          pip install numba
          pip install numpy==1.23.0

      - name: Run NumPy AVX512_SKX detection script
        shell: cmd
        run: |
          call check_numpy_avx512.bat
          echo NUMPY_DETECTS_AVX512_SKX_NP_GT_122=%NUMPY_DETECTS_AVX512_SKX_NP_GT_122%
          echo NPY_DISABLE_CPU_FEATURES=%NPY_DISABLE_CPU_FEATURES%
